<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>UAE Properties - Premium Dashboard</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        :root {
            --primary: #c9a227;
            --primary-dark: #b48a1a;
            --bg-primary: #0b1423;
            --bg-secondary: #141f33;
            --bg-card: #ffffff;
            --border: #2a3b57;
            --text-primary: #ffffff;
            --text-secondary: #fef3c7;
            --text-muted: #9aa8b9;
            --danger: #ef4444;
            --warning: #f59e0b;
            --success: #10b981;
            --gold: #fbbf24;
            --card-text: #000000;
            --timer-bg: #1e293b;
        }

        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); border-radius: 10px; }
        ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 10px; border: 2px solid var(--bg-secondary); }
        ::-webkit-scrollbar-thumb:hover { background: var(--primary); }
        * { scrollbar-width: thin; scrollbar-color: var(--border) var(--bg-secondary); }

        body {
            background-color: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        .login-page {
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            background: linear-gradient(rgba(0,0,0,0.75), rgba(0,0,0,0.75)),
                        url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTi--ILPQ3v9d-cjGr8sLF-OURqyYeGF7HXMw&s') center/cover no-repeat;
            position: relative;
            overflow: hidden;
        }

        .login-container {
            background: rgba(255,255,255,0.98);
            padding: 30px;
            border-radius: 20px;
            width: 100%;
            max-width: 420px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.3);
            border: 1px solid rgba(201,162,39,0.3);
        }

        .header-brand {
            text-align: center;
            margin-bottom: 25px;
        }

        .header-logo {
            width: 100px;
            height: 100px;
            object-fit: contain;
            margin-bottom: 15px;
            filter: drop-shadow(0 4px 8px rgba(201,162,39,0.3));
        }

        .header-brand h1 {
            color: #1f3f5b;
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .subtitle {
            color: #666;
            font-size: 15px;
        }

        .login-tabs {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .login-tab {
            flex: 1;
            padding: 1rem;
            background: #f5f5f5;
            border: 2px solid #ddd;
            border-radius: 10px;
            color: #333;
            cursor: pointer;
            text-align: center;
            font-weight: 500;
            transition: all 0.3s;
        }

        .login-tab.active {
            border-color: var(--primary);
            color: var(--primary);
            background: rgba(201,162,39,0.1);
        }

        .login-form .form-group {
            margin-bottom: 1.5rem;
        }

        .login-form label {
            display: block;
            margin-bottom: 0.5rem;
            color: #555;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .login-form input {
            width: 100%;
            padding: 1rem;
            background: #fff;
            border: 2px solid #ddd;
            border-radius: 10px;
            color: #333;
            font-size: 1rem;
            transition: all 0.3s;
        }

        .login-form input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .login-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: #000;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .login-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(201,162,39,0.3);
        }

        .dashboard {
            display: none;
        }

        .dashboard.active {
            display: block;
        }

        .navbar {
            background: linear-gradient(135deg, #0b1423 0%, #1a2a45 100%);
            padding: 0.8rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--primary);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            flex-wrap: wrap;
            box-shadow: 0 4px 20px rgba(0,0,0,0.3);
        }

        .logo-box {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .logo-img {
            width: 55px;
            height: 55px;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }

        .logo-text {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
            line-height: 1.2;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .logo-text span {
            display: block;
            font-size: 14px;
            font-weight: 500;
            color: #fff;
        }

        @media (max-width:768px) {
            .navbar {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                padding: 10px 12px;
                gap: 8px;
            }
            .logo-box {
                display: flex;
                align-items: center;
                gap: 8px;
                flex: 1;
                min-width: 0;
            }
            .logo-img {
                width: 34px;
                height: 34px;
            }
            .logo-text {
                font-size: 14px;
                white-space: nowrap;
            }
            .logo-text span {
                display: none;
            }
            .user-info {
                margin-left: auto;
                order: 2;
                background: transparent;
                padding: 0;
            }
            .user-details {
                display: none;
            }
            .user-avatar {
                width: 30px;
                height: 30px;
                font-size: 13px;
            }
            .nav-links {
                order: 3;
                width: 100%;
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: 8px;
                gap: 8px;
            }
            .nav-link, .logout-btn {
                flex: 1;
                text-align: center;
                font-size: 13px;
                padding: 8px 6px;
                white-space: nowrap;
            }
        }

        @media (max-width:480px) {
            .nav-link, .logout-btn {
                font-size: 12px;
                padding: 7px 5px;
            }
            .logo-text {
                font-size: 13px;
            }
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: #fff;
            text-decoration: none;
            font-size: 12px;
            transition: all 0.3s;
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: var(--primary);
            transform: translateX(-100%);
            transition: transform 0.3s;
        }

        .nav-link:hover::before,
        .nav-link.active::before {
            transform: translateX(0);
        }

        .nav-link:hover, .nav-link.active {
            color: var(--primary);
            background: rgba(201,162,39,0.1);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 0.5rem 1rem;
            background: rgba(255,255,255,0.05);
            border-radius: 50px;
            border: 2px solid var(--border);
            backdrop-filter: blur(10px);
        }

        .user-avatar {
            width: 25px;
            height: 25px;
            background: linear-gradient(135deg, var(--primary) 0%, #ffd700 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0b1423;
            font-weight: bold;
            border: 2px solid #fff;
        }

        .user-details {
            line-height: 1.4;
        }

        .user-name {
            font-weight: 400;
            color: #fff;
        }

        .user-type {
            font-size: 0.8rem;
            color: var(--primary);
        }

        .logout-btn {
            background: transparent;
            border: 2px solid var(--border);
            color: #fff;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }

        .logout-btn:hover {
            border-color: var(--danger);
            color: var(--danger);
            background: rgba(239,68,68,0.1);
        }

        .main-container {
            display: flex;
            margin-top: 80px;
            min-height: calc(100vh - 80px);
        }

        @media (max-width: 1024px) {
            .main-container {
                flex-direction: column;
                margin-top: 120px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                margin-top: 180px;
            }
        }

        @media (max-width: 480px) {
            .main-container {
                margin-top: 220px;
            }
        }

        .filters-sidebar {
            width: 320px;
            background: var(--bg-secondary);
            padding: 2rem 1.5rem;
            position: fixed;
            height: calc(100vh - 80px);
            overflow-y: auto;
            border-right: 2px solid var(--border);
        }

        @media (max-width: 1024px) {
            .filters-sidebar {
                width: 100%;
                height: auto;
                position: relative;
                padding: 1rem;
            }
        }

        .filters-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            position: sticky;
            top: 0;
            background: var(--bg-secondary);
            padding: 1rem 0;
            z-index: 10;
        }

        .filters-header h3 {
            color: var(--primary);
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .clear-filters {
            color: var(--text-muted);
            cursor: pointer;
            font-size: 0.9rem;
            transition: color 0.3s;
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .clear-filters:hover {
            color: var(--primary);
        }

        .filter-section {
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 2px solid var(--border);
        }

        .filter-section h4 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-section h4 i {
            color: var(--primary);
        }

        .filter-options {
            display: flex;
            flex-direction: column;
            gap: 0.8rem;
            max-height: 200px;
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        .filter-checkbox {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .filter-checkbox:hover {
            background: rgba(255,255,255,0.1);
        }

        .filter-checkbox input[type="checkbox"] {
            accent-color: var(--primary);
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .filter-select {
            width: 100%;
            padding: 0.8rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: #333;
            margin-bottom: 0.5rem;
            cursor: pointer;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .filter-select option {
            color: #333;
            background: #fff;
        }

        .price-range {
            display: flex;
            gap: 0.5rem;
        }

        .price-range input {
            width: 50%;
            padding: 0.8rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: #333;
        }

        .price-range input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .radio-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .radio-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-secondary);
            cursor: pointer;
            padding: 0.3rem;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .radio-label:hover {
            background: rgba(255,255,255,0.1);
        }

        .radio-label input[type="radio"] {
            accent-color: var(--primary);
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .apply-filters-btn {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: #000;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            position: sticky;
            bottom: 1rem;
        }

        .apply-filters-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(201,162,39,0.3);
        }

        .content-area {
            flex: 1;
            margin-left: 320px;
            padding: 2rem;
        }

        @media (max-width: 1024px) {
            .content-area {
                margin-left: 0;
                padding: 1rem;
            }
        }

        .upload-form {
            background: var(--bg-secondary);
            padding: 2rem;
            border-radius: 20px;
            border: 2px solid var(--border);
            max-width: 900px;
            margin: 0 auto;
        }

        .upload-form h2 {
            color: var(--primary);
            margin-bottom: 2rem;
            text-align: center;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            background: var(--bg-card);
            border: 2px solid var(--border);
            border-radius: 10px;
            color: #333;
            font-size: 0.9rem;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .form-group textarea {
            height: 100px;
            resize: vertical;
        }

        .image-upload-section {
            grid-column: span 2;
            margin-top: 0.5rem;
        }

        .image-upload-section h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .image-slots-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
        }

        @media (max-width: 768px) {
            .image-slots-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            .form-grid {
                grid-template-columns: 1fr;
            }
            .form-group.full-width {
                grid-column: span 1;
            }
        }

        @media (max-width: 480px) {
            .image-slots-grid {
                grid-template-columns: 1fr;
            }
        }

        .image-slot {
            background: #1a2a45;
            border: 2px dashed var(--border);
            border-radius: 12px;
            overflow: hidden;
            transition: border-color 0.2s;
        }

        .image-slot:hover {
            border-color: var(--primary);
        }

        .image-slot-preview {
            width: 100%;
            aspect-ratio: 4/3;
            background: #0d1829;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .image-slot-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .image-slot-preview img.has-image {
            display: block;
        }

        .image-slot-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            color: var(--text-muted);
            font-size: 12px;
        }

        .image-slot-placeholder i {
            font-size: 28px;
            color: var(--border);
        }

        .image-slot-placeholder.hidden {
            display: none;
        }

        .image-slot input[type="file"] {
            display: none;
        }

        .image-slot-bottom {
            padding: 8px 10px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .image-slot-bottom label {
            font-size: 11px;
            color: var(--text-muted);
            font-weight: 500;
        }

        .slot-label-input {
            width: 100%;
            padding: 6px 10px;
            background: #0d1829;
            border: 1.5px solid var(--border);
            border-radius: 8px;
            color: #fff;
            font-size: 12px;
            font-family: 'Poppins', sans-serif;
        }

        .slot-label-input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .slot-num {
            position: absolute;
            top: 8px;
            left: 8px;
            background: var(--primary);
            color: #000;
            font-size: 10px;
            font-weight: 700;
            padding: 2px 8px;
            border-radius: 10px;
            z-index: 2;
        }

        .slot-remove {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(239,68,68,0.9);
            color: #fff;
            border: none;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            cursor: pointer;
            font-size: 12px;
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }

        .slot-remove.visible {
            display: flex;
        }

        .btn-upload {
            width: 100%;
            padding: 1rem;
            background: var(--primary);
            color: #000;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 1rem;
        }

        .btn-upload:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .properties-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .properties-header h2 {
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .search-box {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-secondary);
            padding: 0.5rem 1rem;
            border-radius: 10px;
            border: 2px solid var(--border);
        }

        .search-box input {
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 0.9rem;
            width: 250px;
        }

        .search-box input:focus {
            outline: none;
        }

        .search-box i {
            color: var(--text-muted);
        }

        .properties-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 1200px) {
            .properties-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        /* Property Card */
        .property-card {
            width: 100%;
            max-width: 900px;
            background: #fff;
            border-radius: 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.15);
            padding: 24px;
            margin: 0 auto;
            transition: all 0.3s;
            border: 1px solid rgba(201,162,39,0.2);
            position: relative;
        }

        .property-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(201,162,39,0.2);
            border-color: var(--primary);
        }

        /* Card Header */
        .card-header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #eee;
        }

        .card-header h1 {
            color: #1a2a45;
            font-size: 28px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .card-header p {
            color: var(--primary);
            font-size: 16px;
            font-weight: 500;
            margin-top: 5px;
        }

        /* Status and Timer - Below Header */
        .card-badges {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .status-badge {
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 600;
            text-transform: uppercase;
            box-shadow: 0 2px 8px rgba(0,0,0,0.15);
        }

        .status-badge.rent { background: #10b981; color: white; }
        .status-badge.sale { background: #f59e0b; color: white; }
        .status-badge.under-construction { background: #ef4444; color: white; }
        .status-badge.sold-out { background: #6b7280; color: white; }

        .timer-badge {
            padding: 8px 20px;
            border-radius: 30px;
            font-size: 13px;
            font-weight: 600;
            background: linear-gradient(135deg, var(--primary), #ff9800);
            color: #000;
            display: flex;
            align-items: center;
            gap: 6px;
            box-shadow: 0 2px 10px rgba(255,152,0,0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.03); }
            100% { transform: scale(1); }
        }

        .date-badge {
            padding: 6px 15px;
            border-radius: 30px;
            font-size: 12px;
            background: #1a2a45;
            color: white;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Image Grid */
        .grid-main {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .grid-bottom {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .right-column {
            display: grid;
            grid-template-rows: repeat(3, 1fr);
            gap: 12px;
        }

        .img {
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s;
        }

        .img:hover img {
            transform: scale(1.05);
        }

        .label {
            position: absolute;
            bottom: 10px;
            left: 12px;
            color: #000000;
            font-size: 11px;
            font-weight: 500;
            background: rgb(255, 255, 255);
            padding: 4px 12px;
            border-radius: 20px;
            letter-spacing: 0.3px;
        }

        /* Price Row */
        .price-row {
            display: flex;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .price {
            background: #0c3554;
            color: #fff;
            padding: 12px 28px;
            border-radius: 40px;
            font-size: 15px;
            font-weight: 600;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(12,53,84,0.3);
        }

        .title {
            font-size: 24px;
            color: #1a2a45;
            font-weight: 600;
            line-height: 1.2;
        }

        /* Location Info */
        .location-info {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 15px;
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .location-item {
            font-size: 13px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .location-item i {
            color: var(--primary);
        }

        .location-item strong {
            color: #0c3554;
        }

        /* Info Grid */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
            align-items: start;
            background: #f8f9fa;
            padding: 15px;
            border-radius: 12px;
        }

        .info-box {
            font-size: 12px;
            color: #333;
            line-height: 1.5;
        }

        .info-box b {
            display: block;
            color: #0c3554;
            font-size: 14px;
            margin-bottom: 5px;
        }

        /* Features */
        .features {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .features {
                grid-template-columns: repeat(2, 1fr);
            }
            .grid-main, .grid-bottom {
                grid-template-columns: 1fr;
            }
            .info-grid {
                grid-template-columns: 1fr;
            }
        }

        .feature {
            background: #f3f4f6;
            padding: 10px 15px;
            border-radius: 30px;
            font-size: 11px;
            display: flex;
            align-items: center;
            gap: 8px;
            color: #333;
            font-weight: 500;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .feature i {
            color: var(--primary);
            font-size: 16px;
        }

        /* Contact Section */
        .contact {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
        }

        .numbers {
            font-size: 12px;
            color: #333;
        }

        .numbers div {
            margin: 5px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .numbers i {
            color: var(--primary);
            width: 20px;
            font-size: 12px;
        }

        .btns {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 28px;
            border: none;
            border-radius: 40px;
            color: #fff;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            letter-spacing: 0.3px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .contact-btn {
            background: linear-gradient(135deg, #c9a227, #b88945);
        }

        .download-btn {
            background: #0c3554;
        }

        .edit-btn {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        /* Admin Actions */
        .admin-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
            width: 100%;
            justify-content: flex-end;
        }

        .approve-btn,
        .delete-btn {
            padding: 8px 16px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .approve-btn {
            background: #10b981;
            color: white;
        }

        .delete-btn {
            background: #ef4444;
            color: white;
        }

        .status-btn {
            background: var(--primary);
            color: #000;
            padding: 8px 16px;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        /* Edit Modal */
        .edit-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .edit-modal.active {
            display: flex;
        }

        .edit-modal-content {
            background: white;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 30px;
            position: relative;
        }

        .edit-modal-close {
            position: absolute;
            top: 15px;
            right: 15px;
            width: 30px;
            height: 30px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .edit-form-group {
            margin-bottom: 15px;
        }

        .edit-form-group label {
            display: block;
            margin-bottom: 5px;
            color: #333;
            font-weight: 500;
        }

        .edit-form-group input,
        .edit-form-group select,
        .edit-form-group textarea {
            width: 100%;
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
        }

        .save-edit-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: #000;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
        }

        /* Toast Notification */
        .notification-toast {
            position: fixed;
            top: 100px;
            right: 20px;
            z-index: 9999;
            background: white;
            color: #333;
            padding: 12px 20px;
            border-radius: 50px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 10px;
            transform: translateX(400px);
            transition: transform 0.3s;
            border-left: 4px solid var(--primary);
        }

        .notification-toast.show {
            transform: translateX(0);
        }

        .notification-toast i {
            color: var(--primary);
            font-size: 18px;
        }

        /* Property Modal */
        .property-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.98);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            padding: 1rem;
            overflow-y: auto;
        }

        .property-modal.active {
            display: flex;
        }

        .modal-content {
            background: #fff;
            border-radius: 24px;
            max-width: 1000px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 40px;
            height: 40px;
            background: #f0f0f0;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 1;
            color: #333;
            font-size: 20px;
        }

        .modal-close:hover {
            background: var(--danger);
            color: #fff;
            transform: rotate(90deg);
        }

        .modal-gallery {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1rem;
            padding: 2rem;
            background: #f8f9fa;
        }

        @media (max-width: 768px) {
            .modal-gallery {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
        }

        .main-image {
            width: 100%;
            height: 400px;
            border-radius: 16px;
            overflow: hidden;
        }

        .main-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 0.5rem;
            height: 400px;
            overflow-y: auto;
        }

        .thumbnail {
            width: 100%;
            height: 195px;
            border-radius: 12px;
            overflow: hidden;
            cursor: pointer;
            opacity: 0.7;
            transition: all 0.3s;
        }

        .thumbnail:hover,
        .thumbnail.active {
            opacity: 1;
            border: 3px solid var(--primary);
        }

        .thumbnail img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .modal-details {
            padding: 2rem;
            color: #333;
        }

        .modal-title {
            font-size: 2rem;
            color: #0c3554;
            margin-bottom: 0.5rem;
        }

        .modal-location {
            color: #666;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .modal-price {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 1.5rem;
        }

        .modal-specs {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
            padding: 1.5rem;
            background: #f8f9fa;
            border-radius: 16px;
        }

        .spec-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: #333;
            font-size: 16px;
        }

        .spec-item i {
            color: var(--primary);
            font-size: 20px;
        }

        .modal-description {
            color: #555;
            line-height: 1.8;
            margin-bottom: 2rem;
            font-size: 16px;
        }

        .modal-amenities {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .amenity-item {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: #333;
            padding: 0.8rem;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .amenity-item i {
            color: var(--primary);
        }

        .modal-actions {
            display: flex;
            gap: 1rem;
            margin-top: 2rem;
        }

        .btn-share,
        .btn-download {
            flex: 1;
            padding: 1rem;
            border: none;
            border-radius: 40px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 16px;
        }

        .btn-share {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-share:hover {
            background: var(--primary);
            color: #000;
        }

        .btn-download {
            background: var(--primary);
            color: #000;
        }

        .btn-download:hover {
            background: var(--primary-dark);
        }

        /* No Results */
        .no-results {
            text-align: center;
            padding: 3rem 1rem;
            color: #fff;
            grid-column: 1 / -1;
        }

        .no-results i {
            font-size: 4rem;
            margin-bottom: 1rem;
            color: var(--primary);
        }

        .no-results h3 {
            font-size: 24px;
            margin-bottom: 0.5rem;
        }

        .no-results p {
            color: #999;
        }

        /* Add Area Input */
        .add-area-input {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.5rem;
        }

        .area-list {
            max-height: 150px;
            overflow-y: auto;
            border: 2px solid var(--border);
            border-radius: 10px;
            padding: 0.5rem;
            margin-top: 0.5rem;
        }

        /* PDF Download Styles */
        #pdfContent {
            font-family: 'Poppins', sans-serif;
            background: #fff;
            padding: 20px;
        }

        #pdfContent .pdf-header {
            text-align: center;
            border-bottom: 3px solid var(--primary);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        #pdfContent .pdf-header h1 {
            color: #1a2a45;
            font-size: 24px;
            margin: 0;
        }

        #pdfContent .pdf-header p {
            color: var(--primary);
            font-size: 14px;
            margin: 5px 0 0;
        }

        #pdfContent .pdf-images {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        #pdfContent .pdf-images img {
            width: 100%;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
        }

        #pdfContent .pdf-info {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        #pdfContent .pdf-price {
            font-size: 22px;
            color: var(--primary);
            font-weight: 700;
        }

        #pdfContent .pdf-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        #pdfContent .pdf-contact {
            margin-top: 15px;
            padding: 15px;
            background: #1a2a45;
            color: #fff;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <!-- Toast Notification -->
    <div id="notificationToast" class="notification-toast">
        <i class="fas fa-bell"></i>
        <span id="toastMessage">Property updated!</span>
        <span class="close-toast" onclick="hideToast()"><i class="fas fa-times"></i></span>
    </div>

    <!-- Edit Property Modal -->
    <div id="editModal" class="edit-modal">
        <div class="edit-modal-content">
            <div class="edit-modal-close" onclick="closeEditModal()"><i class="fas fa-times"></i></div>
            <h2 style="color: var(--primary); margin-bottom: 20px;">Edit Property</h2>
            <div id="editFormContent"></div>
        </div>
    </div>

    <!-- Login Page -->
    <div class="login-page" id="loginPage">
        <div class="login-container">
            <div class="header-brand">
                <img src="https://cdn-icons-png.flaticon.com/512/3176/3176366.png" alt="UAE Properties Logo" class="header-logo">
                <h1>UAE Properties</h1>
                <p class="subtitle">Premium Property Portal</p>
            </div>
            
            <div class="login-tabs">
                <div class="login-tab active" onclick="switchLoginTab('user')">User Login</div>
                <div class="login-tab" onclick="switchLoginTab('admin')">Admin Login</div>
            </div>

            <div class="login-form" id="loginForm">
                <div class="form-group">
                    <label>Username</label>
                    <input type="text" id="username" placeholder="Enter username" value="user">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="password" placeholder="Enter password" value="password123">
                </div>
                <button class="login-btn" onclick="handleLogin()">Login to Dashboard</button>
            </div>
        </div>
    </div>

    <!-- Main Dashboard -->
    <div class="dashboard" id="dashboard">
        <!-- Navbar -->
        <nav class="navbar">
            <div class="logo-box">
                <img src="https://cdn-icons-png.flaticon.com/512/3176/3176366.png" alt="UAE Properties Logo" class="logo-img">
                <div class="logo-text">
                    UAE Properties
                    <span>Premium Real Estate</span>
                </div>
            </div>
            <div class="nav-links" id="navLinks">
                <span class="nav-link active" onclick="showSection('properties')">Properties</span>
                <span class="nav-link" onclick="showSection('upload')" id="uploadLink">Upload Property</span>
                <div class="user-info" id="userInfo">
                    <div class="user-avatar" id="userAvatar">U</div>
                    <div class="user-details">
                        <div class="user-name" id="displayName">User</div>
                        <div class="user-type" id="userType">User</div>
                    </div>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
            </div>
        </nav>

        <!-- Main Container -->
        <div class="main-container">
            <!-- Filters Sidebar -->
            <div class="filters-sidebar">
                <div class="filters-header">
                    <h3><i class="fas fa-filter"></i> Filters</h3>
                    <span class="clear-filters" onclick="clearAllFilters()">
                        <i class="fas fa-times"></i> Clear All
                    </span>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-city"></i> City</h4>
                    <select class="filter-select" id="filterCity">
                        <option value="">All Cities</option>
                        <option value="Dubai">Dubai</option>
                        <option value="Abu Dhabi">Abu Dhabi</option>
                        <option value="Sharjah">Sharjah</option>
                        <option value="Ajman">Ajman</option>
                        <option value="Ras Al Khaimah">Ras Al Khaimah</option>
                        <option value="Fujairah">Fujairah</option>
                        <option value="Umm Al Quwain">Umm Al Quwain</option>
                    </select>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-map-marker-alt"></i> Area</h4>
                    <select class="filter-select" id="filterArea">
                        <option value="">All Areas</option>
                    </select>
                    <div class="add-area-input">
                        <input type="text" id="newAreaInput" placeholder="Add new area..." style="flex:1; padding:0.8rem; background:#fff; border:2px solid var(--border); border-radius:10px; color:#333;">
                        <button onclick="addNewArea()" style="padding:0.8rem 1rem; background:var(--primary); border:none; border-radius:10px; color:#000; font-weight:600; cursor:pointer;"><i class="fas fa-plus"></i></button>
                    </div>
                    <div class="area-list" id="areaList"></div>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-map-pin"></i> Sub Area</h4>
                    <select class="filter-select" id="filterSubArea">
                        <option value="">All Sub Areas</option>
                    </select>
                    <div class="add-area-input">
                        <input type="text" id="newSubAreaInput" placeholder="Add new sub area..." style="flex:1; padding:0.8rem; background:#fff; border:2px solid var(--border); border-radius:10px; color:#333;">
                        <button onclick="addNewSubArea()" style="padding:0.8rem 1rem; background:var(--primary); border:none; border-radius:10px; color:#000; font-weight:600; cursor:pointer;"><i class="fas fa-plus"></i></button>
                    </div>
                    <div class="area-list" id="subAreaList"></div>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-building"></i> Property Type</h4>
                    <div class="filter-options" id="propertyTypeFilters"></div>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-money-bill"></i> Price Range (AED)</h4>
                    <div class="price-range">
                        <input type="number" id="minPrice" placeholder="Min">
                        <input type="number" id="maxPrice" placeholder="Max">
                    </div>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-home"></i> Property Status</h4>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="propertyStatus" value="" checked> Any
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="propertyStatus" value="rent"> For Rent
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="propertyStatus" value="sale"> For Sale
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="propertyStatus" value="under-construction"> Under Construction
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="propertyStatus" value="sold-out"> Sold Out
                        </label>
                    </div>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-clock"></i> Rental Duration</h4>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="rentalDuration" value="" checked> Any
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="rentalDuration" value="hourly"> Per Hour
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="rentalDuration" value="daily"> Per Day
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="rentalDuration" value="monthly"> Monthly
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="rentalDuration" value="yearly"> Yearly
                        </label>
                    </div>
                </div>

                <div class="filter-section">
                    <h4><i class="fas fa-check-circle"></i> Amenities</h4>
                    <div class="filter-options">
                        <label class="filter-checkbox">
                            <input type="checkbox" value="balcony"> Balcony
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="attachedWashroom"> Attached Washroom
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="window"> Window
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="commonWashroom"> Common Washroom
                        </label>
                        <label class="filter-checkbox">
                            <input type="checkbox" value="fullClosed"> Full Closed
                        </label>
                    </div>
                </div>

                <button class="apply-filters-btn" onclick="applyFilters()">
                    <i class="fas fa-search"></i> Apply Filters
                </button>
            </div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Properties Section -->
                <div id="propertiesSection">
                    <div class="properties-header">
                        <h2><i class="fas fa-building"></i> Available Properties</h2>
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="Search properties...">
                        </div>
                    </div>

                    <div class="properties-grid" id="propertiesGrid"></div>
                </div>

                <!-- Upload Section -->
                <div id="uploadSection" style="display: none;">
                    <div class="upload-form">
                        <h2><i class="fas fa-upload"></i> Upload New Property</h2>
                        
                        <div class="form-grid">
                            <!-- Property Title -->
                            <div class="form-group full-width">
                                <label>Property Title <span style="color: var(--primary);">*</span></label>
                                <input type="text" id="propertyTitle" placeholder="e.g., Skyline Residencies">
                            </div>

                            <!-- Location -->
                            <div class="form-group">
                                <label>City <span style="color: var(--primary);">*</span></label>
                                <select id="propertyCity">
                                    <option value="">Select City</option>
                                    <option value="Dubai">Dubai</option>
                                    <option value="Abu Dhabi">Abu Dhabi</option>
                                    <option value="Sharjah">Sharjah</option>
                                    <option value="Ajman">Ajman</option>
                                    <option value="Ras Al Khaimah">Ras Al Khaimah</option>
                                    <option value="Fujairah">Fujairah</option>
                                    <option value="Umm Al Quwain">Umm Al Quwain</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Area <span style="color: var(--primary);">*</span></label>
                                <select id="propertyArea">
                                    <option value="">Select Area</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Sub Area</label>
                                <select id="propertySubArea">
                                    <option value="">Select Sub Area</option>
                                </select>
                            </div>

                            <!-- Property Details -->
                            <div class="form-group">
                                <label>Property Type <span style="color: var(--primary);">*</span></label>
                                <select id="propertyType">
                                    <optgroup label="Residential">
                                        <option value="Studio Apartment">Studio Apartment</option>
                                        <option value="Bed Space">Bed Space</option>
                                        <option value="Partition">Partition</option>
                                        <option value="Room">Room</option>
                                        <option value="Hall">Hall</option>
                                    </optgroup>
                                    <optgroup label="Apartments (BHK)">
                                        <option value="1 BHK">1 BHK</option>
                                        <option value="2 BHK">2 BHK</option>
                                        <option value="3 BHK">3 BHK</option>
                                        <option value="4 BHK">4 BHK</option>
                                        <option value="5 BHK">5 BHK</option>
                                        <option value="6 BHK">6 BHK</option>
                                        <option value="7 BHK">7 BHK</option>
                                        <option value="8 BHK">8 BHK</option>
                                        <option value="9 BHK">9 BHK</option>
                                        <option value="10 BHK">10 BHK</option>
                                    </optgroup>
                                    <optgroup label="Villas">
                                        <option value="Villa">Villa</option>
                                        <option value="1 BHK Villa">1 BHK Villa</option>
                                        <option value="2 BHK Villa">2 BHK Villa</option>
                                        <option value="3 BHK Villa">3 BHK Villa</option>
                                        <option value="4 BHK Villa">4 BHK Villa</option>
                                        <option value="5 BHK Villa">5 BHK Villa</option>
                                    </optgroup>
                                    <optgroup label="Commercial">
                                        <option value="Warehouse">Warehouse</option>
                                        <option value="Shop">Shop</option>
                                        <option value="Office - Building">Office - Building</option>
                                        <option value="Office - Street">Office - Street</option>
                                    </optgroup>
                                </select>
                            </div>

                            <!-- Price -->
                            <div class="form-group">
                                <label>Price (AED) <span style="color: var(--primary);">*</span></label>
                                <input type="number" id="propertyPrice" placeholder="e.g., 280000">
                            </div>

                            <div class="form-group">
                                <label>Property Status <span style="color: var(--primary);">*</span></label>
                                <select id="propertyStatus">
                                    <option value="rent">For Rent</option>
                                    <option value="sale">For Sale</option>
                                    <option value="under-construction">Under Construction</option>
                                    <option value="sold-out">Sold Out</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Rental/Sale Type</label>
                                <select id="propertyRentalType">
                                    <option value="hourly">Per Hour</option>
                                    <option value="daily">Per Day</option>
                                    <option value="monthly">Monthly</option>
                                    <option value="yearly">Yearly</option>
                                    <option value="sale">For Sale</option>
                                </select>
                            </div>

                            <!-- Size -->
                            <div class="form-group">
                                <label>Size (Sq Ft) <span style="color: var(--primary);">*</span></label>
                                <input type="number" id="propertyAreaSize" placeholder="e.g., 500">
                            </div>

                            <!-- Rooms -->
                            <div class="form-group">
                                <label>Bedrooms</label>
                                <input type="number" id="propertyBedrooms" placeholder="Number of bedrooms" value="0">
                            </div>

                            <div class="form-group">
                                <label>Bathrooms</label>
                                <input type="number" id="propertyBathrooms" placeholder="Number of bathrooms" value="1">
                            </div>

                            <!-- Available In -->
                            <div class="form-group">
                                <label>Available In</label>
                                <input type="text" id="availableIn" placeholder="e.g., 1 day, 7 days">
                            </div>

                            <!-- Description -->
                            <div class="form-group full-width">
                                <label>Description</label>
                                <textarea id="propertyDescription" placeholder="Detailed description of the property..."></textarea>
                            </div>

                            <!-- Amenities Section -->
                            <div class="form-group full-width">
                                <h3 style="color: var(--primary); margin: 1rem 0;">Amenities</h3>
                            </div>

                            <div class="form-group">
                                <label>Balcony</label>
                                <select id="balcony">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Attached Washroom</label>
                                <select id="attachedWashroom">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Window</label>
                                <select id="window">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Common Washroom</label>
                                <select id="commonWashroom">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>Full Closed</label>
                                <select id="fullClosed">
                                    <option value="yes">Yes</option>
                                    <option value="no" selected>No</option>
                                </select>
                            </div>

                            <!-- Image Upload with Balcony Label -->
                            <div class="image-upload-section">
                                <h3><i class="fas fa-images"></i> Property Images & Labels (6 photos)</h3>
                                <div class="image-slots-grid">
                                    <!-- Slot 1 -->
                                    <div class="image-slot">
                                        <div class="image-slot-preview" onclick="triggerUpload(1)">
                                            <span class="slot-num">1</span>
                                            <div class="image-slot-placeholder" id="ph1"><i class="fas fa-camera"></i><span>Click to upload</span></div>
                                            <img id="prev1" alt="">
                                            <button class="slot-remove" id="rm1" onclick="removeImage(event,1)"><i class="fas fa-times"></i></button>
                                        </div>
                                        <input type="file" id="img1" accept="image/*" onchange="previewImage(1)">
                                        <div class="image-slot-bottom">
                                            <label>Room Label</label>
                                            <input class="slot-label-input" id="lbl1" type="text" placeholder="e.g. Balcony" value="Balcony">
                                        </div>
                                    </div>
                                    <!-- Slot 2 -->
                                    <div class="image-slot">
                                        <div class="image-slot-preview" onclick="triggerUpload(2)">
                                            <span class="slot-num">2</span>
                                            <div class="image-slot-placeholder" id="ph2"><i class="fas fa-camera"></i><span>Click to upload</span></div>
                                            <img id="prev2" alt="">
                                            <button class="slot-remove" id="rm2" onclick="removeImage(event,2)"><i class="fas fa-times"></i></button>
                                        </div>
                                        <input type="file" id="img2" accept="image/*" onchange="previewImage(2)">
                                        <div class="image-slot-bottom">
                                            <label>Room Label</label>
                                            <input class="slot-label-input" id="lbl2" type="text" placeholder="e.g. Master Bedroom" value="Master Bedroom">
                                        </div>
                                    </div>
                                    <!-- Slot 3 -->
                                    <div class="image-slot">
                                        <div class="image-slot-preview" onclick="triggerUpload(3)">
                                            <span class="slot-num">3</span>
                                            <div class="image-slot-placeholder" id="ph3"><i class="fas fa-camera"></i><span>Click to upload</span></div>
                                            <img id="prev3" alt="">
                                            <button class="slot-remove" id="rm3" onclick="removeImage(event,3)"><i class="fas fa-times"></i></button>
                                        </div>
                                        <input type="file" id="img3" accept="image/*" onchange="previewImage(3)">
                                        <div class="image-slot-bottom">
                                            <label>Room Label</label>
                                            <input class="slot-label-input" id="lbl3" type="text" placeholder="e.g. Kitchen" value="Kitchen">
                                        </div>
                                    </div>
                                    <!-- Slot 4 -->
                                    <div class="image-slot">
                                        <div class="image-slot-preview" onclick="triggerUpload(4)">
                                            <span class="slot-num">4</span>
                                            <div class="image-slot-placeholder" id="ph4"><i class="fas fa-camera"></i><span>Click to upload</span></div>
                                            <img id="prev4" alt="">
                                            <button class="slot-remove" id="rm4" onclick="removeImage(event,4)"><i class="fas fa-times"></i></button>
                                        </div>
                                        <input type="file" id="img4" accept="image/*" onchange="previewImage(4)">
                                        <div class="image-slot-bottom">
                                            <label>Room Label</label>
                                            <input class="slot-label-input" id="lbl4" type="text" placeholder="e.g. Living Room" value="Living Room">
                                        </div>
                                    </div>
                                    <!-- Slot 5 -->
                                    <div class="image-slot">
                                        <div class="image-slot-preview" onclick="triggerUpload(5)">
                                            <span class="slot-num">5</span>
                                            <div class="image-slot-placeholder" id="ph5"><i class="fas fa-camera"></i><span>Click to upload</span></div>
                                            <img id="prev5" alt="">
                                            <button class="slot-remove" id="rm5" onclick="removeImage(event,5)"><i class="fas fa-times"></i></button>
                                        </div>
                                        <input type="file" id="img5" accept="image/*" onchange="previewImage(5)">
                                        <div class="image-slot-bottom">
                                            <label>Room Label</label>
                                            <input class="slot-label-input" id="lbl5" type="text" placeholder="e.g. Bathroom" value="Bathroom">
                                        </div>
                                    </div>
                                    <!-- Slot 6 -->
                                    <div class="image-slot">
                                        <div class="image-slot-preview" onclick="triggerUpload(6)">
                                            <span class="slot-num">6</span>
                                            <div class="image-slot-placeholder" id="ph6"><i class="fas fa-camera"></i><span>Click to upload</span></div>
                                            <img id="prev6" alt="">
                                            <button class="slot-remove" id="rm6" onclick="removeImage(event,6)"><i class="fas fa-times"></i></button>
                                        </div>
                                        <input type="file" id="img6" accept="image/*" onchange="previewImage(6)">
                                        <div class="image-slot-bottom">
                                            <label>Room Label</label>
                                            <input class="slot-label-input" id="lbl6" type="text" placeholder="e.g. View" value="View">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Contact Numbers -->
                            <div class="form-group full-width">
                                <h3 style="color: var(--primary); margin: 1rem 0;">Contact Information</h3>
                            </div>

                            <div class="form-group">
                                <label>WhatsApp Number</label>
                                <input type="text" id="whatsappNumber" placeholder="+971 50 123 4567" value="+971 50 123 4567">
                            </div>

                            <div class="form-group">
                                <label>Phone Number</label>
                                <input type="text" id="phoneNumber" placeholder="+971 4 987 6543" value="+971 4 987 6543">
                            </div>

                            <!-- Profile Code -->
                            <div class="form-group">
                                <label>Profile Code</label>
                                <input type="text" id="profileCode" readonly placeholder="Auto-generated">
                            </div>

                            <div class="form-group">
                                <label>Location Link</label>
                                <input type="text" id="locationLink" placeholder="Google Maps link" value="https://maps.google.com">
                            </div>
                        </div>

                        <button class="btn-upload" onclick="uploadProperty()">
                            <i class="fas fa-upload"></i> Upload Property
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Property Details Modal -->
    <div class="property-modal" id="propertyModal">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal()">
                <i class="fas fa-times"></i>
            </div>
            <div class="modal-gallery" id="modalGallery"></div>
            <div class="modal-details" id="modalDetails"></div>
        </div>
    </div>

    <!-- Hidden PDF Content -->
    <div id="pdfContent" style="position: absolute; left: -9999px; top: 0;"></div>

    <script>
        // City Areas Data
        const defaultCityAreas = {
            'Dubai': ['Downtown Dubai', 'Palm Jumeirah', 'Dubai Marina', 'JLT', 'Business Bay', 'Arabian Ranches', 'Jumeirah', 'Deira', 'Bur Dubai', 'Al Barsha'],
            'Abu Dhabi': ['Corniche', 'Al Reem Island', 'Yas Island', 'Saadiyat Island', 'Khalifa City', 'Al Raha Beach', 'Al Bateen'],
            'Sharjah': ['Al Majaz', 'Al Nahda', 'Al Taawun', 'Al Khan', 'Al Qasimia'],
            'Ajman': ['Al Nuaimia', 'Al Rashidiya', 'Al Jurf', 'Al Mowaihat'],
            'Ras Al Khaimah': ['Al Hamra Village', 'Al Marjan Island', 'Mina Al Arab'],
            'Fujairah': ['Al Faseel', 'Al Reef', 'Al Maktoum'],
            'Umm Al Quwain': ['Al Salamah', 'Al Raas', 'Al Aahad']
        };

        // Sub Areas Data
        const defaultSubAreas = {
            'Downtown Dubai': ['Burj Khalifa', 'The Address', 'South Ridge', 'The Lofts'],
            'Palm Jumeirah': ['Atlantis', 'The Palm Tower', 'Shoreline', 'Frond Villas'],
            'Dubai Marina': ['Marina Walk', 'JBR', 'Marina Towers', 'Dubai Marina Mall'],
            'JLT': ['Cluster A', 'Cluster B', 'Cluster C', 'Cluster D'],
            'Business Bay': ['Executive Towers', 'Bay Avenue', 'Marquise Square', 'The Opus']
        };

        let customAreas = JSON.parse(localStorage.getItem('customAreas')) || JSON.parse(JSON.stringify(defaultCityAreas));
        let customSubAreas = JSON.parse(localStorage.getItem('customSubAreas')) || JSON.parse(JSON.stringify(defaultSubAreas));

        const propertyTypes = [
            'Studio Apartment', 'Bed Space', 'Partition', 'Room', 'Hall',
            '1 BHK', '2 BHK', '3 BHK', '4 BHK', '5 BHK', '6 BHK', '7 BHK', '8 BHK', '9 BHK', '10 BHK',
            'Villa', '1 BHK Villa', '2 BHK Villa', '3 BHK Villa', '4 BHK Villa', '5 BHK Villa',
            'Warehouse', 'Shop', 'Office - Building', 'Office - Street'
        ];

        const validUser = { username: 'user', password: 'password123' };
        const validAdmin = { username: 'admin', password: 'admin123' };
        let currentUser = null;
        let properties = JSON.parse(localStorage.getItem('properties')) || [];

        // Sample data
        if (properties.length === 0) {
            const today = new Date();
            const tomorrow = new Date(today); tomorrow.setDate(tomorrow.getDate() + 1);
            const nextWeek = new Date(today); nextWeek.setDate(nextWeek.getDate() + 7);
            properties = [
                {
                    id: 1,
                    profileCode: '561',
                    title: 'Skyline Residencies',
                    city: 'Dubai',
                    area: 'Dubai Marina',
                    subArea: 'Marina Walk',
                    type: 'Studio Apartment',
                    price: 280000,
                    propertyStatus: 'rent',
                    rentalType: 'monthly',
                    bedrooms: 0,
                    bathrooms: 1,
                    areaSize: 500,
                    description: 'Beautiful studio in prime location with stunning views',
                    amenities: { balcony: 'yes', attachedWashroom: 'yes', window: 'yes', commonWashroom: 'no', fullClosed: 'yes' },
                    imageLabels: { main: 'Balcony', second: 'Master Bedroom', third: 'Kitchen', fourth: 'Living Room', fifth: 'Bathroom', sixth: 'View' },
                    vacancy: 3,
                    images: [
                        'https://images.unsplash.com/photo-1501183638710-841dd1904471?w=800',
                        'https://images.unsplash.com/photo-1554995207-c18c203602cb?w=800',
                        'https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800',
                        'https://images.unsplash.com/photo-1560448075-bb4caa6c0c39?w=800',
                        'https://images.unsplash.com/photo-1560184897-ae75f418493e?w=800',
                        'https://images.unsplash.com/photo-1560185009-5bf9f2849488?w=800'
                    ],
                    contact: { whatsapp: '+971 50 123 4567', phone: '+971 4 987 6543' },
                    locationLink: 'https://maps.google.com',
                    userId: 'user',
                    status: 'approved',
                    createdAt: new Date().toISOString(),
                    availableFrom: tomorrow.toISOString(),
                    availableIn: '1 day'
                },
                {
                    id: 2,
                    profileCode: '562',
                    title: 'Luxury Villa with Pool',
                    city: 'Dubai',
                    area: 'Palm Jumeirah',
                    subArea: 'Shoreline',
                    type: '5 BHK Villa',
                    price: 8500000,
                    propertyStatus: 'sale',
                    rentalType: 'sale',
                    bedrooms: 5,
                    bathrooms: 7,
                    areaSize: 5000,
                    description: 'Luxury villa with private pool and beach access',
                    amenities: { balcony: 'yes', attachedWashroom: 'yes', window: 'yes', commonWashroom: 'no', fullClosed: 'yes' },
                    imageLabels: { main: 'Balcony', second: 'Master Bedroom', third: 'Kitchen', fourth: 'Pool', fifth: 'Garden', sixth: 'View' },
                    vacancy: 1,
                    images: [
                        'https://images.unsplash.com/photo-1613977257363-707ba9348227?w=800',
                        'https://images.unsplash.com/photo-1512917774080-9991f1c4c750?w=800',
                        'https://images.unsplash.com/photo-1600596542815-ffad4c1539a9?w=800',
                        'https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=800',
                        'https://images.unsplash.com/photo-1600607687939-ce8a6c25118c?w=800',
                        'https://images.unsplash.com/photo-1600566753086-00f18fb6b3ea?w=800'
                    ],
                    contact: { whatsapp: '+971 50 987 6543', phone: '+971 4 123 4567' },
                    locationLink: 'https://maps.google.com',
                    userId: 'user',
                    status: 'approved',
                    createdAt: new Date().toISOString(),
                    availableFrom: nextWeek.toISOString(),
                    availableIn: '7 days'
                }
            ];
            localStorage.setItem('properties', JSON.stringify(properties));
        }

        // ===== TOAST =====
        function showToast(message) {
            const toast = document.getElementById('notificationToast');
            document.getElementById('toastMessage').textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        function hideToast() {
            document.getElementById('notificationToast').classList.remove('show');
        }

        // ===== LOGIN =====
        function switchLoginTab(type) {
            document.querySelectorAll('.login-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
        }

        function handleLogin() {
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            if (!username || !password) { alert('Please enter username and password'); return; }
            const type = document.querySelector('.login-tab.active').textContent.includes('User') ? 'user' : 'admin';
            if (type === 'admin' && username === validAdmin.username && password === validAdmin.password) {
                currentUser = { username: 'admin', type: 'admin' };
            } else if (type === 'user' && username === validUser.username && password === validUser.password) {
                currentUser = { username: 'user', type: 'user' };
            } else { alert('Invalid credentials'); return; }
            document.getElementById('loginPage').style.display = 'none';
            document.getElementById('dashboard').classList.add('active');
            document.getElementById('displayName').textContent = currentUser.username;
            document.getElementById('userType').textContent = currentUser.type === 'admin' ? 'Administrator' : 'Property User';
            document.getElementById('userAvatar').textContent = currentUser.username.charAt(0).toUpperCase();
            document.getElementById('uploadLink').style.display = currentUser.type === 'user' ? 'block' : 'none';
            document.getElementById('profileCode').value = Math.floor(560 + Math.random() * 100);
            populateFilters();
            loadAreas();
            populateAreaDropdowns();
            loadProperties();
            showToast('Welcome back, ' + currentUser.username + '!');
        }

        function logout() {
            currentUser = null;
            document.getElementById('loginPage').style.display = 'flex';
            document.getElementById('dashboard').classList.remove('active');
            document.getElementById('username').value = 'user';
            document.getElementById('password').value = 'password123';
        }

        function showSection(section) {
            document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
            event.target.classList.add('active');
            if (section === 'properties') {
                document.getElementById('propertiesSection').style.display = 'block';
                document.getElementById('uploadSection').style.display = 'none';
                loadProperties();
            } else {
                if (!currentUser || currentUser.type !== 'user') { alert('Only users can upload properties'); return; }
                document.getElementById('propertiesSection').style.display = 'none';
                document.getElementById('uploadSection').style.display = 'block';
                loadAreasForUpload();
            }
        }

        // ===== AREA MANAGEMENT =====
        function loadAreas() {
            let city = document.getElementById('filterCity').value;
            let list = document.getElementById('areaList');
            const filterAreaSelect = document.getElementById('filterArea');
            filterAreaSelect.innerHTML = '<option value="">All Areas</option>';
            
            if (!city) {
                list.innerHTML = '<p style="color: var(--text-muted); padding: 8px;">Select a city first</p>';
                return;
            }
            
            let areas = customAreas[city] || [];
            areas.forEach(a => {
                filterAreaSelect.innerHTML += `<option value="${a}">${a}</option>`;
            });
            
            list.innerHTML = areas.map(a => `
                <div style="display:flex;justify-content:space-between;align-items:center;padding:0.5rem;border-bottom:1px solid var(--border);color:var(--text-secondary);">
                    <span>${a}</span>
                    <button onclick="removeArea('${a}')" style="background:var(--danger);color:#fff;border:none;border-radius:5px;width:25px;height:25px;cursor:pointer;"><i class="fas fa-times"></i></button>
                </div>
            `).join('');
            
            loadSubAreas();
        }

        function loadSubAreas() {
            let area = document.getElementById('filterArea').value;
            let list = document.getElementById('subAreaList');
            const filterSubAreaSelect = document.getElementById('filterSubArea');
            filterSubAreaSelect.innerHTML = '<option value="">All Sub Areas</option>';
            
            if (!area) {
                list.innerHTML = '<p style="color: var(--text-muted); padding: 8px;">Select an area first</p>';
                return;
            }
            
            let subAreas = customSubAreas[area] || [];
            subAreas.forEach(s => {
                filterSubAreaSelect.innerHTML += `<option value="${s}">${s}</option>`;
            });
            
            list.innerHTML = subAreas.map(s => `
                <div style="display:flex;justify-content:space-between;align-items:center;padding:0.5rem;border-bottom:1px solid var(--border);color:var(--text-secondary);">
                    <span>${s}</span>
                    <button onclick="removeSubArea('${s}')" style="background:var(--danger);color:#fff;border:none;border-radius:5px;width:25px;height:25px;cursor:pointer;"><i class="fas fa-times"></i></button>
                </div>
            `).join('');
        }

        function addNewArea() {
            let city = document.getElementById('filterCity').value;
            let newArea = document.getElementById('newAreaInput').value.trim();
            if (!city || !newArea) return alert('Select city and enter area name');
            if (!customAreas[city]) customAreas[city] = [];
            if (customAreas[city].includes(newArea)) return alert('Area already exists');
            customAreas[city].push(newArea);
            localStorage.setItem('customAreas', JSON.stringify(customAreas));
            document.getElementById('newAreaInput').value = '';
            loadAreas();
            showToast('Area added: ' + newArea);
        }

        function removeArea(area) {
            let city = document.getElementById('filterCity').value;
            if (confirm(`Remove "${area}"?`)) {
                customAreas[city] = customAreas[city].filter(a => a !== area);
                localStorage.setItem('customAreas', JSON.stringify(customAreas));
                loadAreas();
                showToast('Area removed');
            }
        }

        function addNewSubArea() {
            let area = document.getElementById('filterArea').value;
            let newSubArea = document.getElementById('newSubAreaInput').value.trim();
            if (!area || !newSubArea) return alert('Select area and enter sub area name');
            if (!customSubAreas[area]) customSubAreas[area] = [];
            if (customSubAreas[area].includes(newSubArea)) return alert('Sub area already exists');
            customSubAreas[area].push(newSubArea);
            localStorage.setItem('customSubAreas', JSON.stringify(customSubAreas));
            document.getElementById('newSubAreaInput').value = '';
            loadSubAreas();
            showToast('Sub Area added: ' + newSubArea);
        }

        function removeSubArea(subArea) {
            let area = document.getElementById('filterArea').value;
            if (confirm(`Remove "${subArea}"?`)) {
                customSubAreas[area] = customSubAreas[area].filter(s => s !== subArea);
                localStorage.setItem('customSubAreas', JSON.stringify(customSubAreas));
                loadSubAreas();
                showToast('Sub Area removed');
            }
        }

        function loadAreasForUpload() {
            let city = document.getElementById('propertyCity').value;
            let areaSelect = document.getElementById('propertyArea');
            if (!city) {
                areaSelect.innerHTML = '<option value="">Select Area</option>';
                return;
            }
            let areas = customAreas[city] || [];
            areaSelect.innerHTML = '<option value="">Select Area</option>' + areas.map(a => `<option value="${a}">${a}</option>`).join('');
        }

        function loadSubAreasForUpload() {
            let area = document.getElementById('propertyArea').value;
            let subAreaSelect = document.getElementById('propertySubArea');
            if (!area) {
                subAreaSelect.innerHTML = '<option value="">Select Sub Area</option>';
                return;
            }
            let subAreas = customSubAreas[area] || [];
            subAreaSelect.innerHTML = '<option value="">Select Sub Area</option>' + subAreas.map(s => `<option value="${s}">${s}</option>`).join('');
        }

        function populateAreaDropdowns() {
            document.getElementById('filterCity').addEventListener('change', function() { loadAreas(); });
            document.getElementById('filterArea').addEventListener('change', function() { loadSubAreas(); });
            document.getElementById('propertyCity').addEventListener('change', function() { loadAreasForUpload(); });
            document.getElementById('propertyArea').addEventListener('change', function() { loadSubAreasForUpload(); });
        }

        function populateFilters() {
            let cont = document.getElementById('propertyTypeFilters');
            cont.innerHTML = propertyTypes.map(t => `<label class="filter-checkbox"><input type="checkbox" value="${t}"> ${t}</label>`).join('');
        }

        // ===== IMAGE UPLOAD =====
        function triggerUpload(n) {
            document.getElementById('img' + n).click();
        }

        function previewImage(n) {
            const file = document.getElementById('img' + n).files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = e => {
                const img = document.getElementById('prev' + n);
                img.src = e.target.result;
                img.classList.add('has-image');
                document.getElementById('ph' + n).classList.add('hidden');
                document.getElementById('rm' + n).classList.add('visible');
            };
            reader.readAsDataURL(file);
        }

        function removeImage(e, n) {
            if (e) e.stopPropagation();
            const img = document.getElementById('prev' + n);
            if (img) {
                img.src = '';
                img.classList.remove('has-image');
            }
            document.getElementById('ph' + n).classList.remove('hidden');
            document.getElementById('rm' + n).classList.remove('visible');
            document.getElementById('img' + n).value = '';
        }

        function getUploadedImages() {
            const imgs = [];
            for (let i = 1; i <= 6; i++) {
                const el = document.getElementById('prev' + i);
                imgs.push(el && el.src && el.src !== window.location.href ? el.src : '');
            }
            return imgs;
        }

        function getImageLabels() {
            return {
                main: document.getElementById('lbl1')?.value || 'Balcony',
                second: document.getElementById('lbl2')?.value || 'Master Bedroom',
                third: document.getElementById('lbl3')?.value || 'Kitchen',
                fourth: document.getElementById('lbl4')?.value || 'Living Room',
                fifth: document.getElementById('lbl5')?.value || 'Bathroom',
                sixth: document.getElementById('lbl6')?.value || 'View'
            };
        }

        // ===== UPLOAD PROPERTY =====
        function uploadProperty() {
            if (!currentUser || currentUser.type !== 'user') {
                alert('Please login as user to upload properties');
                return;
            }
            
            const imageUrls = getUploadedImages();
            const labels = getImageLabels();
            
            const newProperty = {
                id: Date.now(),
                profileCode: document.getElementById('profileCode')?.value || Math.floor(560 + Math.random() * 100),
                title: document.getElementById('propertyTitle').value,
                city: document.getElementById('propertyCity').value,
                area: document.getElementById('propertyArea').value,
                subArea: document.getElementById('propertySubArea').value,
                type: document.getElementById('propertyType').value,
                price: parseFloat(document.getElementById('propertyPrice').value),
                propertyStatus: document.getElementById('propertyStatus')?.value || 'rent',
                rentalType: document.getElementById('propertyRentalType').value,
                bedrooms: parseInt(document.getElementById('propertyBedrooms').value) || 0,
                bathrooms: parseInt(document.getElementById('propertyBathrooms').value) || 1,
                areaSize: parseFloat(document.getElementById('propertyAreaSize').value) || 0,
                description: document.getElementById('propertyDescription').value,
                amenities: {
                    balcony: document.getElementById('balcony').value,
                    attachedWashroom: document.getElementById('attachedWashroom').value,
                    window: document.getElementById('window').value,
                    commonWashroom: document.getElementById('commonWashroom').value,
                    fullClosed: document.getElementById('fullClosed').value
                },
                imageLabels: labels,
                vacancy: 3,
                images: imageUrls,
                contact: {
                    whatsapp: document.getElementById('whatsappNumber').value || '+971 50 123 4567',
                    phone: document.getElementById('phoneNumber').value || '+971 4 987 6543'
                },
                locationLink: document.getElementById('locationLink')?.value || 'https://maps.google.com',
                availableIn: document.getElementById('availableIn')?.value || '',
                status: 'pending',
                userId: currentUser.username,
                createdAt: new Date().toISOString()
            };
            
            if (!newProperty.title || !newProperty.city || !newProperty.area || !newProperty.type || !newProperty.price) {
                alert('Please fill all required fields');
                return;
            }
            
            properties.push(newProperty);
            localStorage.setItem('properties', JSON.stringify(properties));
            showToast('Property uploaded successfully! Waiting for admin approval.');
            showSection('properties');
        }

        // ===== EDIT MODAL =====
        function openEditModal(id) {
            const p = properties.find(p => p.id === id);
            if (!p) return;
            
            document.getElementById('editFormContent').innerHTML = `
                <form onsubmit="savePropertyEdit(${id}); return false;">
                    <div class="edit-form-group"><label>Title</label><input type="text" id="editTitle" value="${(p.title||'').replace(/"/g,'&quot;')}" required></div>
                    <div class="edit-form-group"><label>Area</label><input type="text" id="editArea" value="${p.area||''}"></div>
                    <div class="edit-form-group"><label>Sub Area</label><input type="text" id="editSubArea" value="${p.subArea||''}"></div>
                    <div class="edit-form-group"><label>Price (AED)</label><input type="number" id="editPrice" value="${p.price}" required></div>
                    <div class="edit-form-group"><label>Size (Sq Ft)</label><input type="number" id="editSize" value="${p.areaSize}"></div>
                    <div class="edit-form-group"><label>Bedrooms</label><input type="number" id="editBedrooms" value="${p.bedrooms}"></div>
                    <div class="edit-form-group"><label>Bathrooms</label><input type="number" id="editBathrooms" value="${p.bathrooms}"></div>
                    <div class="edit-form-group"><label>Property Status</label>
                        <select id="editStatus">
                            <option value="rent" ${p.propertyStatus==='rent'?'selected':''}>For Rent</option>
                            <option value="sale" ${p.propertyStatus==='sale'?'selected':''}>For Sale</option>
                            <option value="under-construction" ${p.propertyStatus==='under-construction'?'selected':''}>Under Construction</option>
                            <option value="sold-out" ${p.propertyStatus==='sold-out'?'selected':''}>Sold Out</option>
                        </select>
                    </div>
                    <div class="edit-form-group"><label>Description</label><textarea id="editDescription" rows="3">${p.description||''}</textarea></div>
                    <div class="edit-form-group"><label>WhatsApp</label><input type="text" id="editWhatsapp" value="${p.contact?.whatsapp||''}"></div>
                    <div class="edit-form-group"><label>Phone</label><input type="text" id="editPhone" value="${p.contact?.phone||''}"></div>
                    <div class="edit-form-group"><label>Available In</label><input type="text" id="editAvailableIn" value="${p.availableIn||''}" placeholder="e.g., 1 day, 7 days"></div>
                    <button type="submit" class="save-edit-btn">Save Changes</button>
                </form>
            `;
            document.getElementById('editModal').classList.add('active');
        }

        function savePropertyEdit(id) {
            const p = properties.find(p => p.id === id);
            if (!p) return;
            
            p.title = document.getElementById('editTitle').value;
            p.area = document.getElementById('editArea').value;
            p.subArea = document.getElementById('editSubArea').value;
            p.price = parseFloat(document.getElementById('editPrice').value);
            p.areaSize = parseFloat(document.getElementById('editSize').value);
            p.bedrooms = parseInt(document.getElementById('editBedrooms').value) || 0;
            p.bathrooms = parseInt(document.getElementById('editBathrooms').value) || 1;
            p.propertyStatus = document.getElementById('editStatus').value;
            p.description = document.getElementById('editDescription').value;
            p.contact = {
                whatsapp: document.getElementById('editWhatsapp').value,
                phone: document.getElementById('editPhone').value
            };
            p.availableIn = document.getElementById('editAvailableIn').value;
            
            localStorage.setItem('properties', JSON.stringify(properties));
            closeEditModal();
            applyFilters();
            showToast('Property updated successfully!');
        }

        function closeEditModal() {
            document.getElementById('editModal').classList.remove('active');
        }

        // ===== ADMIN ACTIONS =====
        function approveProperty(id) {
            if (!currentUser || currentUser.type !== 'admin') return;
            properties = properties.map(p => p.id === id ? {...p, status: 'approved'} : p);
            localStorage.setItem('properties', JSON.stringify(properties));
            applyFilters();
            showToast('Property approved!');
        }

        function changePropertyStatus(id) {
            let p = properties.find(p => p.id === id);
            const arr = ['rent', 'sale', 'under-construction', 'sold-out'];
            const next = arr[(arr.indexOf(p.propertyStatus) + 1) % 4];
            properties = properties.map(p => p.id === id ? {...p, propertyStatus: next} : p);
            localStorage.setItem('properties', JSON.stringify(properties));
            applyFilters();
            showToast('Status changed to: ' + next);
        }

        function deleteProperty(id) {
            if (!currentUser || currentUser.type !== 'admin') return;
            if (confirm('Delete this property?')) {
                properties = properties.filter(p => p.id !== id);
                localStorage.setItem('properties', JSON.stringify(properties));
                applyFilters();
                showToast('Property deleted');
            }
        }

        // ===== PROPERTY DISPLAY =====
        function getStatusText(s) {
            const map = {
                rent: 'For Rent',
                sale: 'For Sale',
                'under-construction': 'Under Construction',
                'sold-out': 'Sold Out'
            };
            return map[s] || s;
        }

        function formatDate(d) {
            let diff = Math.ceil((new Date() - new Date(d)) / (1000 * 60 * 60 * 24));
            if (diff <= 1) return 'Today';
            if (diff === 2) return 'Yesterday';
            return diff + ' days ago';
        }

        function displayProperties(list) {
            let grid = document.getElementById('propertiesGrid');
            if (list.length === 0) {
                grid.innerHTML = `<div class="no-results"><i class="fas fa-search"></i><h3>No properties found</h3><p>Try adjusting your filters</p></div>`;
                return;
            }
            
            list.sort((a, b) => {
                const o = { 'under-construction': 1, 'sale': 2, 'rent': 3, 'sold-out': 4 };
                return (o[a.propertyStatus]||5) - (o[b.propertyStatus]||5) || new Date(b.createdAt) - new Date(a.createdAt);
            });
            
            const fallback = `data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100%25' height='100%25'%3E%3Crect width='100%25' height='100%25' fill='%23f0f0f0'/%3E%3Ctext x='50%25' y='50%25' text-anchor='middle' dy='.3em' fill='%23aaa' font-family='Arial' font-size='14'%3ENo Image%3C/text%3E%3C/svg%3E`;
            
            grid.innerHTML = list.map(p => {
                const imgs = p.images || [];
                const lbl = p.imageLabels || {};
                const roomIcons = {
                    'Balcony': '', 'Living Room': '', 'Master Bedroom': '', 'Kitchen': '',
                    'Maid Room': '', 'Bathroom': '', 'View': '',
                    'Pool': '', 'Garden': '', 'Dining': '', 'Gym': '', 'Parking': ''
                };
                
                const imgTag = (i, label) => {
                    const icon = roomIcons[label] || '';
                    return `<div class="img"><img src="${imgs[i] || fallback}" loading="lazy" onerror="this.src='${fallback}'"><div class="label">${icon} ${label || 'Room'}</div></div>`;
                };
                
                const priceDisplay = `AED ${p.price.toLocaleString()}`;
                const rentalSuffix = p.rentalType && p.rentalType !== 'sale' ? ` / ${p.rentalType}` : '';
                
                return `
                <div class="property-card" onclick="showPropertyDetails(${p.id})">
                    <!-- Card Header -->
                    <div class="card-header">
                        <h1>Users Properties UAE</h1>
                        <p>Profile Code: ${p.profileCode || ''}</p>
                    </div>
                    
                    <!-- Status and Timer Badges - Below Header -->
                    <div class="card-badges">
                        <span class="status-badge ${p.propertyStatus}">${getStatusText(p.propertyStatus)}</span>
                        ${p.availableIn ? `<span class="timer-badge"><i class="fas fa-clock"></i> Available in ${p.availableIn}</span>` : ''}
                        <span class="date-badge"><i class="fas fa-calendar-alt"></i> ${formatDate(p.createdAt)}</span>
                    </div>
                    
                    <!-- Image Grid -->
                    <div class="grid-main">
                        ${imgTag(0, lbl.main || 'Balcony')}
                        ${imgTag(1, lbl.second || 'Master Bedroom')}
                    </div>
                    <div class="grid-bottom">
                        ${imgTag(2, lbl.third || 'Kitchen')}
                        <div class="right-column">
                            ${imgTag(3, lbl.fourth || 'Living Room')}
                            ${imgTag(4, lbl.fifth || 'Bathroom')}
                            ${imgTag(5, lbl.sixth || 'View')}
                        </div>
                    </div>
                    
                    <!-- Price Row -->
                    <div class="price-row">
                        <div class="price">${priceDisplay}${rentalSuffix}</div>
                        <div class="title">${p.title || ''}</div>
                    </div>
                    
                    <!-- Location Info with Area and Sub Area -->
                    <div class="location-info">
                        <div class="location-item">
                            <i class="fas fa-city"></i>
                            <span><strong>City:</strong> ${p.city}</span>
                        </div>
                        <div class="location-item">
                            <i class="fas fa-map-marker-alt"></i>
                            <span><strong>Area:</strong> ${p.area}</span>
                        </div>
                        ${p.subArea ? `
                        <div class="location-item">
                            <i class="fas fa-map-pin"></i>
                            <span><strong>Sub Area:</strong> ${p.subArea}</span>
                        </div>
                        ` : ''}
                    </div>
                    
                    <!-- Info Grid -->
                    <div class="info-grid">
                        <div class="info-box"><b>Type</b>${p.type}</div>
                        <div class="info-box"><b>Size</b>${p.areaSize} Sq Ft</div>
                        <div class="info-box"><b>Profile</b>${p.profileCode || ''}</div>
                    </div>
                    
                    <!-- Features -->
                    <div class="features">
                        ${p.amenities?.balcony === 'yes' ? '<div class="feature"><i class="fa fa-building"></i> Balcony</div>' : ''}
                        ${p.amenities?.window === 'yes' ? '<div class="feature"><i class="fa fa-window-maximize"></i> Window</div>' : ''}
                        ${p.bedrooms > 0 ? `<div class="feature"><i class="fa fa-bed"></i> ${p.bedrooms} Bed</div>` : ''}
                        <div class="feature"><i class="fa fa-bath"></i> ${p.bathrooms} Bath</div>
                    </div>
                    
                    <!-- Contact Section -->
                    <div class="contact">
                        <div class="numbers">
                            <div><i class="fab fa-whatsapp"></i> ${p.contact?.whatsapp || ''}</div>
                            <div><i class="fas fa-phone"></i> ${p.contact?.phone || ''}</div>
                        </div>
                        <div class="btns">
                            <button class="btn contact-btn" onclick="event.stopPropagation();"><i class="fas fa-phone"></i> Contact Us</button>
                            <button class="btn download-btn" onclick="event.stopPropagation(); downloadPropertyPDF(${p.id})"><i class="fas fa-download"></i> Download PDF</button>
                            ${currentUser?.type === 'admin' ? `<button class="btn edit-btn" onclick="event.stopPropagation(); openEditModal(${p.id})"><i class="fas fa-edit"></i> Edit</button>` : ''}
                        </div>
                        ${currentUser?.type === 'admin' ? `
                        <div class="admin-actions">
                            ${p.status === 'pending' ? `<button class="approve-btn" onclick="event.stopPropagation(); approveProperty(${p.id})"><i class="fas fa-check"></i> Approve</button>` : ''}
                            <button class="status-btn" onclick="event.stopPropagation(); changePropertyStatus(${p.id})"><i class="fas fa-sync-alt"></i> Status</button>
                            <button class="delete-btn" onclick="event.stopPropagation(); deleteProperty(${p.id})"><i class="fas fa-trash"></i> Delete</button>
                        </div>
                        ` : ''}
                    </div>
                </div>`;
            }).join('');
        }

        // ===== FILTERS =====
        function applyFilters() {
            let filtered = [...properties];
            const city = document.getElementById('filterCity').value;
            const area = document.getElementById('filterArea').value;
            const subArea = document.getElementById('filterSubArea').value;
            const minPrice = parseFloat(document.getElementById('minPrice').value);
            const maxPrice = parseFloat(document.getElementById('maxPrice').value);
            const propertyStatus = document.querySelector('input[name="propertyStatus"]:checked')?.value;
            const rentalDuration = document.querySelector('input[name="rentalDuration"]:checked')?.value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();

            if (city) filtered = filtered.filter(p => p.city === city);
            if (area) filtered = filtered.filter(p => p.area === area);
            if (subArea) filtered = filtered.filter(p => p.subArea === subArea);
            if (minPrice) filtered = filtered.filter(p => p.price >= minPrice);
            if (maxPrice) filtered = filtered.filter(p => p.price <= maxPrice);
            if (propertyStatus) filtered = filtered.filter(p => p.propertyStatus === propertyStatus);
            if (rentalDuration) filtered = filtered.filter(p => p.rentalType === rentalDuration);

            const typeCheckboxes = document.querySelectorAll('#propertyTypeFilters input:checked');
            if (typeCheckboxes.length > 0) {
                const selectedTypes = Array.from(typeCheckboxes).map(cb => cb.value);
                filtered = filtered.filter(p => selectedTypes.includes(p.type));
            }

            const amenityChecks = ['balcony', 'attachedWashroom', 'window', 'commonWashroom', 'fullClosed'];
            amenityChecks.forEach(a => {
                const cb = document.querySelector(`.filter-options input[value="${a}"]`);
                if (cb?.checked) filtered = filtered.filter(p => p.amenities?.[a] === 'yes');
            });

            if (searchTerm) {
                filtered = filtered.filter(p =>
                    (p.title||'').toLowerCase().includes(searchTerm) ||
                    (p.description||'').toLowerCase().includes(searchTerm) ||
                    (p.area||'').toLowerCase().includes(searchTerm) ||
                    (p.subArea||'').toLowerCase().includes(searchTerm) ||
                    (p.city||'').toLowerCase().includes(searchTerm)
                );
            }

            if (!currentUser || currentUser.type !== 'admin') {
                filtered = filtered.filter(p => p.status === 'approved');
            }

            displayProperties(filtered);
        }

        function loadProperties() {
            applyFilters();
        }

        function clearAllFilters() {
            document.getElementById('filterCity').value = '';
            document.getElementById('filterArea').innerHTML = '<option value="">All Areas</option>';
            document.getElementById('filterSubArea').innerHTML = '<option value="">All Sub Areas</option>';
            document.getElementById('areaList').innerHTML = '';
            document.getElementById('subAreaList').innerHTML = '';
            document.querySelectorAll('#propertyTypeFilters input').forEach(cb => cb.checked = false);
            document.getElementById('minPrice').value = '';
            document.getElementById('maxPrice').value = '';
            const ps = document.querySelector('input[name="propertyStatus"][value=""]');
            if (ps) ps.checked = true;
            const rd = document.querySelector('input[name="rentalDuration"][value=""]');
            if (rd) rd.checked = true;
            document.querySelectorAll('.filter-options input[type="checkbox"]').forEach(cb => cb.checked = false);
            document.getElementById('searchInput').value = '';
            applyFilters();
            showToast('Filters cleared');
        }

        // ===== PROPERTY DETAIL MODAL =====
        function showPropertyDetails(propertyId) {
            const property = properties.find(p => p.id === propertyId);
            if (!property) return;
            
            const modal = document.getElementById('propertyModal');
            if (!modal) return;
            
            const gallery = document.getElementById('modalGallery');
            const details = document.getElementById('modalDetails');
            
            gallery.innerHTML = `
                <div class="main-image"><img src="${property.images[0]||''}" id="mainModalImage"></div>
                <div class="thumbnail-grid">
                    ${property.images.map((img, index) => `
                        <div class="thumbnail ${index === 0 ? 'active' : ''}" onclick="changeModalImage('${img}', this)">
                            <img src="${img}" alt="Thumbnail">
                        </div>
                    `).join('')}
                </div>
            `;
            
            const amenities = [];
            if (property.amenities?.balcony === 'yes') amenities.push('Balcony');
            if (property.amenities?.attachedWashroom === 'yes') amenities.push('Attached Washroom');
            if (property.amenities?.window === 'yes') amenities.push('Window');
            if (property.amenities?.commonWashroom === 'yes') amenities.push('Common Washroom');
            if (property.amenities?.fullClosed === 'yes') amenities.push('Full Closed');
            
            details.innerHTML = `
                <h2 class="modal-title">${property.title||''}</h2>
                <div class="modal-location">
                    <i class="fas fa-map-marker-alt"></i> 
                    ${property.subArea ? property.subArea + ', ' : ''}${property.area}, ${property.city} | Code: ${property.profileCode}
                </div>
                <div class="modal-price">AED ${property.price.toLocaleString()} ${property.rentalType && property.rentalType !== 'sale' ? '/ ' + property.rentalType : ' (Sale)'}</div>
                <div class="modal-specs">
                    <div class="spec-item"><i class="fas fa-bed"></i> ${property.bedrooms} Beds</div>
                    <div class="spec-item"><i class="fas fa-bath"></i> ${property.bathrooms} Baths</div>
                    <div class="spec-item"><i class="fas fa-vector-square"></i> ${property.areaSize} sq ft</div>
                    <div class="spec-item"><i class="fas fa-calendar-alt"></i> ${property.vacancy||3}/3 Vacancies</div>
                </div>
                <div class="modal-description">${property.description||''}</div>
                <h3 style="color: var(--primary); margin-bottom: 1rem;">Amenities</h3>
                <div class="modal-amenities">
                    ${amenities.map(a => `<div class="amenity-item"><i class="fas fa-check-circle"></i> ${a}</div>`).join('')}
                </div>
                <div class="modal-actions">
                    <button class="btn-share" onclick="shareProperty(${property.id})"><i class="fas fa-share-alt"></i> Share</button>
                    <button class="btn-download" onclick="downloadPropertyPDF(${property.id})"><i class="fas fa-download"></i> Download PDF</button>
                </div>
            `;
            
            modal.classList.add('active');
        }

        function changeModalImage(src, element) {
            document.getElementById('mainModalImage').src = src;
            document.querySelectorAll('.thumbnail').forEach(thumb => thumb.classList.remove('active'));
            element.classList.add('active');
        }

        function closeModal() {
            document.getElementById('propertyModal').classList.remove('active');
        }

        function shareProperty(id) {
            const property = properties.find(p => p.id === id);
            const text = ` ${property.title}\n ${property.subArea ? property.subArea + ', ' : ''}${property.area}, ${property.city}\n AED ${property.price.toLocaleString()}\n ${property.contact?.whatsapp}`;
            
            if (navigator.share) {
                navigator.share({ title: property.title, text });
            } else {
                navigator.clipboard.writeText(text);
                showToast('Copied to clipboard!');
            }
        }

        // ===== PDF DOWNLOAD =====
        async function downloadPropertyPDF(id) {
            const property = properties.find(p => p.id === id);
            if (!property) return;
            
            showToast('Generating PDF...');
            
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF('p', 'mm', 'a4');
            
            // Colors
            const primaryColor = [201, 162, 39];
            const darkColor = [26, 42, 69];
            const lightBg = [248, 249, 250];
            
            // Header
            doc.setFillColor(...darkColor);
            doc.rect(0, 0, 210, 40, 'F');
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(24);
            doc.setFont('helvetica', 'bold');
            doc.text('UAE Properties', 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setFont('helvetica', 'normal');
            doc.text('Premium Real Estate', 105, 30, { align: 'center' });
            
            // Profile Code Badge
            doc.setFillColor(...primaryColor);
            doc.roundedRect(75, 45, 60, 12, 3, 3, 'F');
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            doc.text(`Profile: ${property.profileCode || 'N/A'}`, 105, 53, { align: 'center' });
            
            // Title
            doc.setTextColor(...darkColor);
            doc.setFontSize(18);
            doc.setFont('helvetica', 'bold');
            doc.text(property.title || 'Property', 15, 70);
            
            // Location
            doc.setFontSize(11);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(100, 100, 100);
            const locationText = `${property.subArea ? property.subArea + ', ' : ''}${property.area}, ${property.city}`;
            doc.text(locationText, 15, 80);
            
            // Images Section
            let yPos = 90;
            const imgWidth = 60;
            const imgHeight = 45;
            const imgSpacing = 5;
            
            // Load and add images
            const imagesToLoad = property.images?.slice(0, 6) || [];
            let loadedImages = 0;
            
            for (let i = 0; i < Math.min(3, imagesToLoad.length); i++) {
                const xPos = 15 + i * (imgWidth + imgSpacing);
                try {
                    doc.addImage(imagesToLoad[i], 'JPEG', xPos, yPos, imgWidth, imgHeight, undefined, 'FAST');
                } catch (e) {
                    // Placeholder for failed images
                    doc.setFillColor(...lightBg);
                    doc.rect(xPos, yPos, imgWidth, imgHeight, 'F');
                    doc.setFontSize(10);
                    doc.setTextColor(150, 150, 150);
                    doc.text('Image', xPos + imgWidth/2, yPos + imgHeight/2, { align: 'center' });
                }
            }
            
            // Second row of images
            yPos = 140;
            for (let i = 0; i < Math.min(3, Math.max(0, imagesToLoad.length - 3)); i++) {
                const xPos = 15 + i * (imgWidth + imgSpacing);
                try {
                    doc.addImage(imagesToLoad[i + 3], 'JPEG', xPos, yPos, imgWidth, imgHeight, undefined, 'FAST');
                } catch (e) {
                    doc.setFillColor(...lightBg);
                    doc.rect(xPos, yPos, imgWidth, imgHeight, 'F');
                }
            }
            
            // Price Section
            yPos = 195;
            doc.setFillColor(...darkColor);
            doc.roundedRect(15, yPos, 80, 20, 5, 5, 'F');
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(16);
            doc.setFont('helvetica', 'bold');
            const priceText = `AED ${property.price?.toLocaleString() || '0'}`;
            doc.text(priceText, 55, yPos + 13, { align: 'center' });
            
            if (property.rentalType && property.rentalType !== 'sale') {
                doc.setFontSize(10);
                doc.text(`/ ${property.rentalType}`, 85, yPos + 13);
            }
            
            // Status Badge
            const statusText = getStatusText(property.propertyStatus);
            doc.setFillColor(...primaryColor);
            doc.roundedRect(100, yPos, 50, 20, 5, 5, 'F');
            doc.setTextColor(0, 0, 0);
            doc.setFontSize(11);
            doc.text(statusText, 125, yPos + 13, { align: 'center' });
            
            // Property Details Box
            yPos = 225;
            doc.setFillColor(...lightBg);
            doc.roundedRect(15, yPos, 180, 35, 3, 3, 'F');
            
            doc.setTextColor(...darkColor);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'bold');
            
            // Details Grid
            doc.text('Property Type:', 20, yPos + 12);
            doc.text('Size:', 20, yPos + 27);
            doc.setFont('helvetica', 'normal');
            doc.text(property.type || 'N/A', 55, yPos + 12);
            doc.text(`${property.areaSize || 0} Sq Ft`, 55, yPos + 27);
            
            doc.setFont('helvetica', 'bold');
            doc.text('Bedrooms:', 105, yPos + 12);
            doc.text('Bathrooms:', 105, yPos + 27);
            doc.setFont('helvetica', 'normal');
            doc.text(`${property.bedrooms || 0}`, 140, yPos + 12);
            doc.text(`${property.bathrooms || 0}`, 140, yPos + 27);
            
            // Amenities Section
            yPos = 270;
            doc.setTextColor(...primaryColor);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('Amenities', 15, yPos);
            
            yPos += 8;
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(80, 80, 80);
            
            const amenities = [];
            if (property.amenities?.balcony === 'yes') amenities.push('Balcony');
            if (property.amenities?.attachedWashroom === 'yes') amenities.push('Attached Washroom');
            if (property.amenities?.window === 'yes') amenities.push('Window');
            if (property.amenities?.commonWashroom === 'yes') amenities.push('Common Washroom');
            if (property.amenities?.fullClosed === 'yes') amenities.push('Full Closed');
            
            if (amenities.length > 0) {
                doc.text(amenities.join('    '), 15, yPos);
            } else {
                doc.text('No specific amenities listed', 15, yPos);
            }
            
            // Description
            yPos += 15;
            doc.setTextColor(...primaryColor);
            doc.setFontSize(14);
            doc.setFont('helvetica', 'bold');
            doc.text('Description', 15, yPos);
            
            yPos += 8;
            doc.setFontSize(10);
            doc.setFont('helvetica', 'normal');
            doc.setTextColor(80, 80, 80);
            
            const descLines = doc.splitTextToSize(property.description || 'No description available', 180);
            doc.text(descLines.slice(0, 4), 15, yPos);
            
            // Contact Section
            yPos = 280 + (descLines.length > 4 ? 30 : descLines.length * 5);
            
            doc.setFillColor(...darkColor);
            doc.rect(0, yPos, 210, 40, 'F');
            
            doc.setTextColor(...primaryColor);
            doc.setFontSize(12);
            doc.setFont('helvetica', 'bold');
            doc.text('Contact Information', 15, yPos + 12);
            
            doc.setTextColor(255, 255, 255);
            doc.setFontSize(11);
            doc.setFont('helvetica', 'normal');
            doc.text(`WhatsApp: ${property.contact?.whatsapp || 'N/A'}`, 15, yPos + 25);
            doc.text(`Phone: ${property.contact?.phone || 'N/A'}`, 105, yPos + 25);
            
            // Footer
            doc.setFontSize(8);
            doc.setTextColor(150, 150, 150);
            doc.text('Generated by UAE Properties Portal', 105, 290, { align: 'center' });
            
            // Save the PDF
            const fileName = `${property.title || 'Property'}_${property.profileCode || 'UAE'}.pdf`;
            doc.save(fileName);
            
            showToast('PDF downloaded successfully!');
        }

        // Event Listeners
        document.getElementById('searchInput').addEventListener('keyup', function(e) {
            if (e.key === 'Enter') applyFilters();
        });

        // Initialize
        populateAreaDropdowns();
        populateFilters();
    </script>
</body>
</html>